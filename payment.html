<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Payment</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;600;700&display=swap');
  :root { --bg1:#2d0f18; --bg2:#6d2b3a; --pink1:#ff8abf; --pink2:#ff3ca6; }
  body{font-family:Poppins,Arial,sans-serif;margin:0;min-height:100vh;
    background:linear-gradient(180deg,var(--bg1),var(--bg2));display:flex;align-items:center;justify-content:center;color:#ffd6ea;}
  .card{width:90%;max-width:540px;background:rgba(0,0,0,0.5);padding:30px;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,0.6);text-align:center;border:1px solid rgba(255,255,255,0.03);}
  h1{color:var(--pink1);text-shadow:0 6px 18px rgba(255,90,151,0.18);margin:0 0 12px;}
  .meta{font-weight:600;margin:6px 0;color:#ffe8f3}
  .order-items{margin-top:14px;text-align:left;background:rgba(255,255,255,0.02);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);}
  .order-items div{padding:8px 6px;border-radius:8px;background:rgba(255,255,255,0.01);margin-bottom:8px;display:flex;justify-content:space-between;}
  .total{margin-top:12px;font-weight:700;font-size:1.1rem;color:#ffd6ea}
  .btn{display:block;width:100%;padding:12px;border-radius:10px;border:none;margin-top:12px;background:linear-gradient(90deg,var(--pink1),var(--pink2));color:#fff;font-weight:700;cursor:pointer}
  .btn:hover{transform:translateY(-3px)}
  .small{font-size:0.9rem;color:#ffd6eaaa;margin-top:6px}
</style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="paymentTitle">
    <h1 id="paymentTitle">ðŸ’³ Payment</h1>

    <div id="customerMeta" class="meta">Loading...</div>

    <h3 style="margin-top:16px;color:#ffd6ea">Order Details</h3>
    <div id="items" class="order-items" aria-live="polite"></div>

    <div id="total" class="total">Total: â‚¹0</div>

    <button id="payNow" class="btn">Pay Now</button>
    <button class="btn" style="background:#ff629c;margin-top:8px" id="cancel">Cancel & Return</button>

    <div class="small">Payments are simulated â€” integrate Razorpay to accept real payments.</div>
  </div>

<script>
  // read order (saved from checkout)
  const order = JSON.parse(localStorage.getItem('order') || 'null');
  const cart = JSON.parse(localStorage.getItem('cart') || '[]');

  // safety checks
  if(!order || !cart || cart.length===0){
    document.getElementById('customerMeta').textContent = 'No order found. Returning to shop...';
    setTimeout(()=> location.href='index.html', 1500);
  } else {
    document.getElementById('customerMeta').textContent = `Customer: ${order.name} â€¢ ${order.email}`;
    // render items
    const itemsEl = document.getElementById('items');
    itemsEl.innerHTML = '';
    let total = 0;
    cart.forEach(it => {
      const price = Number(it.price) || 0;
      const qty = Number(it.qty) || 1;
      const line = price * qty;
      total += line;
      const row = document.createElement('div');
      row.innerHTML = `<span style="font-weight:600">${it.name} <small style="font-weight:400">x${qty}</small></span><span>â‚¹${line}</span>`;
      itemsEl.appendChild(row);
    });

    document.getElementById('total').textContent = `Total: â‚¹${total}`;
  }

  // dummy Pay Now handler â€” replace with Razorpay integration
  document.getElementById('payNow').addEventListener('click', ()=>{
    // you can call Razorpay here. After success, go to order confirmation:
    // window.location.href = 'order.html';
    // For now simulate success:
    alert('Payment simulated â€” redirecting to confirmation.');
    // Optionally, attach paymentId to order object, save orders, etc.
    window.location.href = 'order.html';
  });

  document.getElementById('cancel').addEventListener('click', ()=> location.href='index.html');
</script>
</body>
</html>
